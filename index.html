<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HairHaus Pro | Tha DollHouse</title>

<style>
body{
margin:0;
font-family:system-ui;
background:black;
color:white;
}
.container{
max-width:1200px;
margin:auto;
padding:20px;
}
.grid{
display:grid;
gap:20px;
}
@media(min-width:900px){
.grid{grid-template-columns:1fr 1fr;}
}
.card{
background:#111;
padding:20px;
border-radius:16px;
border:1px solid rgba(255,255,255,.08);
}
button{
background:#C9A24D;
border:none;
padding:14px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
}
input,textarea{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:1px solid #333;
background:#000;
color:white;
}
.hidden{display:none;}
.stat{
font-size:28px;
color:#C9A24D;
font-weight:bold;
}
</style>
</head>

<body>

<div class="container">

<!-- LOGIN -->
<div id="loginScreen" class="grid">

<div class="card">
<h1>HairHaus Pro</h1>
<p>Luxury Salon Business OS</p>

<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">

<button onclick="login()">Login</button>
</div>

<div class="card">
<img src="assets/img/hero-stylists.png" style="width:100%">
</div>

</div>

<!-- APP -->
<div id="appScreen" class="hidden">

<h2>Dashboard</h2>
<p id="userEmail"></p>

<div class="grid">

<!-- BOOKKEEPING -->
<div class="card">
<h3>Bookkeeping</h3>

<input id="revInput" placeholder="Add Revenue">
<button onclick="addRevenue()">Add Revenue</button>

<input id="expInput" placeholder="Add Expense">
<button onclick="addExpense()">Add Expense</button>

<hr>

<div>Revenue <div class="stat" id="revTotal">$0</div></div>
<div>Expenses <div class="stat" id="expTotal">$0</div></div>
<div>Profit <div class="stat" id="profitTotal">$0</div></div>
</div>

<!-- SOCIAL POSTS -->
<div class="card">
<h3>Social Media Post Creator</h3>

<input type="file" id="postImage">
<textarea id="postCaption" placeholder="Write caption"></textarea>

<button onclick="savePost()">Save Post Draft</button>

<div id="postList"></div>
</div>

<!-- NOTES -->
<div class="card">
<h3>Business Notes</h3>
<textarea id="notesArea"></textarea>
<button onclick="saveNotes()">Save Notes</button>
</div>

<!-- CHECKLIST -->
<div class="card">
<h3>Checklist</h3>

<input id="taskInput" placeholder="New Task">
<button onclick="addTask()">Add Task</button>

<div id="taskList"></div>
</div>

</div>

<button onclick="logout()">Logout</button>

</div>

</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
"https://fjjedjoakplopglfkjsn.supabase.co",
"YOUR_ANON_KEY"
);

let user;
let revenue = [];
let expenses = [];
let posts = [];
let tasks = [];

window.login = async ()=>{
const email = email.value;
const pass = password.value;

const { data,error } = await supabase.auth.signInWithPassword({
email:email,
password:pass
});

if(error){ alert(error.message); return;}

user = data.user;

loginScreen.classList.add("hidden");
appScreen.classList.remove("hidden");
userEmail.innerText = user.email;
};

window.logout = async ()=>{
await supabase.auth.signOut();
location.reload();
};

window.addRevenue = ()=>{
const val = Number(revInput.value);
revenue.push(val);
updateFinance();
};

window.addExpense = ()=>{
const val = Number(expInput.value);
expenses.push(val);
updateFinance();
};

function updateFinance(){
const r = revenue.reduce((a,b)=>a+b,0);
const e = expenses.reduce((a,b)=>a+b,0);

revTotal.innerText = "$"+r;
expTotal.innerText = "$"+e;
profitTotal.innerText = "$"+(r-e);
}

window.savePost = ()=>{
const caption = postCaption.value;
posts.push(caption);
renderPosts();
};

function renderPosts(){
postList.innerHTML = posts.map(p=>"<div>"+p+"</div>").join("");
}

window.saveNotes = ()=>{
localStorage.setItem("notes",notesArea.value);
};

window.addTask = ()=>{
tasks.push(taskInput.value);
renderTasks();
};

function renderTasks(){
taskList.innerHTML = tasks.map(t=>"<div>âœ” "+t+"</div>").join("");
}
</script>

</body>
</html>
